{% extends "base.html" %}
{% load static i18n %}
{% load humanize %}
{% block title %}Docket {% if docket %}{{ docket }} {% endif %}Prestart{% endblock %}
{% block head_title %}Docket {% if docket %}{{ docket }} {% endif %}Prestart{% endblock %}


{% block css %}
<link href="{% static 'css/style.css' %}" rel="stylesheet">
{{ docket_form.media.css }}
{% endblock %}


{% block breadcrumb %}
<ol class="breadcrumb">
    <li>
        <a href="{% url 'home' %}">Home</a>
    </li>
    <li>
        <a href="{% url 'daily_dockets:list' %}">Dockets</a>
    </li>
    <li>
        {% if docket_url %}
        <a href="{{ docket_url }}">{{ docket }}</a>
        {% else %}
        <a href="{% url 'daily_dockets:daily_docket_new' %}">New</a>
        {% endif %}
    </li>
    <li class="active">
        <strong>Prestart</strong>
    </li>
</ol>
{% endblock breadcrumb %}


{% block actions %}
<a class="btn btn-primary btn-lg visible-xs visible-sm" style="margin-right: 10px;" href="{% url 'daily_dockets:daily_docket_new' %}"><i class="fa fa-arrow-circle-left" style="padding-right: 5px;"></i>Go Back</a></li>
{% endblock %}


{% block content %}
<div class="row">
    <div class="docket_buttons btn-group visible-md visible-lg pull-left">
        {% if docket_url %}
        <a class="btn btn-primary btn-sm" href="{% url 'daily_dockets:docket_start' docket.slug %}">
          <i class="fa fa-arrow-circle-left" style="padding-right: 5px;"></i>Go Back
        </a>
        {% else %}
        <a class="btn btn-primary btn-sm" href="{% url 'daily_dockets:daily_docket_new' %}">
          <i class="fa fa-arrow-circle-left" style="padding-right: 5px;"></i>Go Back
        </a>
        {% endif %}
    </div>
    <div class="docket_buttons btn-group visible-md visible-lg pull-left">
        <a class="btn btn-primary btn-sm" onclick="prestart_form.myVariable.name='new_prestart';prestart_form.submit();">
          <i class="fa fa-floppy-o" style="padding-right: 5px;"></i>Save Prestart
        </a>
    </div>
</div>
<div class="col-lg-12">
    <form id="prestart_form" role="form" method="POST">
        <input type="hidden" id="myVariable" name="" />
        {% csrf_token %}
        {% if prestart_form.errors %}
        <div class="ibox-content m-b-sm border-bottom">
            <strong>Please correct the following errors:</strong>
            {{ prestart_form.errors.as_ul }}
        </div>
        {% endif %}

        <div class="ibox-content m-b-sm border-bottom">
            <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>{{ prestart_form.docket_date.label }}</label>
                        {{ prestart_form.docket_date }}
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>{{ prestart_form.docket_shift.label }}</label>
                        {{ prestart_form.docket_shift }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>{{ prestart_form.equipment.label }}</label>
                        {{ prestart_form.equipment }}
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>{{ prestart_form.equipment_num.label }}</label>
                        {{ prestart_form.equipment_num }}
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <label>{{ prestart_form.equipment_hours.label }}</label>
                        {{ prestart_form.equipment_hours }}
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="ibox">
                    <div class="ibox-title">
                        <h4>Operators are required to check the following items before commencing work. These records are for the basis of a  plant maintenace procedure and will be subject to random inspection. Keep the record with you at all times.</h4>
                        <h4>Before commencing operation check:</h4>
                    </div>
                    <div class="ibox-content">
                        <table class="table table-hover" id="check_items">
                            <tbody>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item1.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item1 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item2.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item2 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item3.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item3 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item4.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item4 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item5.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item5 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item6.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item6 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item7.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item7 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item8.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item8 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item9.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item9 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item10.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item10 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item11.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item11 }}</b></td>
                                </tr>
                                <tr style="cursor: pointer;">
                                    <td class="docket_colour_div" ><div class="client_colour_element"></div></td>
                                    <td class="project-title"><b>{{ prestart_form.item12.label }}</b></td>
                                    <td class="docket-check"><b>{{ prestart_form.item12 }}</b></td>
                                </tr>
                            </tbody>
                        </table>
                        {{ prestart_form.attachments }}
                        {{ prestart_form.fault }}
                        {{ prestart_form.reported_to }}
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="row">
      <div class="docket_buttons btn-group pull-right" style="margin-right: 15px;">
          <a class="btn btn-primary btn-lg visible-xs visible-sm" onclick="prestart_form.myVariable.name='new_prestart';prestart_form.submit();">
            <i class="fa fa-floppy-o" style="padding-right: 5px;"></i>Save Prestart
          </a>
      </div>
    </div>
</div>
{% endblock content %}

{% block javascript %}
<!-- Date Picker -->
<script src="{% static 'js/plugins/fullcalendar/moment.min.js' %}"></script>
<script src="{% static 'js/plugins/datapicker/bootstrap-datepicker.js' %}"></script>

<script>
$('#docket_date_tag').datepicker({
    format: 'yyyy-mm-dd',
    todayBtn: "linked",
    keyboardNavigation: false,
    forceParse: false,
    calendarWeeks: true,
    autoclose: true
});

/* Toggle checkbox when clicking row */
$('#check_items tr td.project-title').click(function() {
    var check = $('input[type=checkbox]', $(this).next());
    $(check).prop("checked", !$(check).prop('checked'));
});
</script>
{% endblock javascript %}
